<html>
<head>
<meta charset="utf-8"/>
	<link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,500,700&amp;subset=greek-ext" rel="stylesheet">
</head>
<body>
  
  <style>
    html, body, #editor {
      margin: 0;
      height: 100%;
      font-family: 'Helvetica Neue', Arial, sans-serif;
    }
    .text {
      display: inline-block;
      width: 100%;
      height: 90%;
      vertical-align: top;
      box-sizing: border-box;
      padding: 10px;
      padding-left: 40px;
      border: none;
      resize: none;
      outline: none;
      color: #586e75;
      background-color: #fdf6e3;
      font-size: 14px;
      font-family: 'Fira Mono', courier, monospace;
      font-weight: 500;
    }
    .header {
      display: inline-block;
      width: 100%;
      height: 60px;
      vertical-align: top;
      box-sizing: border-box;
      padding: 10px;
      padding-left: 40px;
      border: none;
      resize: none;
      outline: none;
      color: #586e75;
      background-color: #eee8d5;
      font-size: 14px;
      font-family: 'Fira Mono', courier, monospace;
      font-weight: 700;
      font-size: 20pt;
    }
    textarea::placeholder {
    	color: #93a1a1;
    	font-weight: 400;
    }
    code {
      color: #657b83;
    }
    #editor {
      display: flex;
      flex-direction: column;
    }
    button {
      background-color: #eee8d5; 
      border: none;
      color: #657b83;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      -moz-transition: .6s all;
      -webkit-transition: .6s all;
      -o-transition: .6s all;
      transition: .6s all;
    }
    button:hover {
      background-color: #d33683;
      cursor: pointer;
      color: white;
    }
  </style>
  <div id="editor">
    <textarea class="header" v-model="title" :placeholder="placeholdertitle"></textarea>
    <textarea class="text" v-model="input" :placeholder="placeholdertext"></textarea>
    <button v-on:click="send">{{button.text}}</button>
  </div>
  <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
  <script src="https://unpkg.com/vue"></script>
  <script>
   var app = new Vue({
      el: '#editor',
      data: {
        title : '',
        input: '',
        button: {"text":"Z A P R O P O N U J"},
        placeholdertitle: 'Już rozpaliło się ognisko',
        placeholdertext: 'Już rozpaliło się ognisko           C\nDając nam dobrej wróżby znak        C G\nSiedliśmy wszyscy przy nim blisko   G\nBo w całej Polsce siedzą tak        G C C7\n\n  Siedzą harcerze przy płomieniach   F\n  Ciepły blask ognia skupia ich      G C G\n  Wszystko co złe to szuka cienia    C\n  Do światła dobro garnie się        G C C7/ G C\n\nMówiłeś druhu komendancie           C\nŻe zaufanie do nas masz             C G\nŻe wierzysz w nasze szczere chęci   G\nWszak ty harcerskie serca znasz     G C C7\n\n  Warunki tylko warunkami            F\n  Od dawna już słyszymy to           G C G\n  Lecz my jesteśmy harcerzami        C\n  I zwyciężymy wszelkie zło!         G C C7/ GC'
      },
      methods: {
        send: function(){
          var data = {"text":this.input,"title":this.title}
          if (data.text.length === 0 || data.title.length === 0){
            app.button.text = "BŁĄD, ŻADNE POLE NIE MOŻE BYĆ PUSTE"
            setTimeout(function(){app.button.text = "Z A P R O P O N U J"}, 2000)
          }
          else {
          $.ajax({
                url: "http://www.iansowinski.com:4567/add",
                data,
                method: 'POST',
                success: function(s){
                    app.button.text = "S U K C E S !"
                    setTimeout(function(){app.button.text = "Z A P R O P O N U J"}, 2000)
                },
                error : function(e){
                    console.log(e)
                }
            })
          }
        }
      }
    })
  </script>
</body>
</html>

